# Makefile for testing code by comparing test output with sample output
# For clover_invert2

#------------------------------------------------------------
# Examples for tests:

#    make -f Make_test check
# or, for a specific project or projects
#    make -f Make_test "PROJS=su3_clov" check


# Edit the Makefile for the appropriate architecture and the file
# See ../Make_test_template to select the appropriate LAUNCH.

LAUNCH = 
LAUNCH2 = 

# Results are in the files out.test.diff.* 
#------------------------------------------------------------

# For comparing test output with sample output

PROJS = su3_clov

PRECLIST = 1 2

PATTERNS = POINTPION RUNNING
TOL = 1e-4

include ../Make_test_template

fnal_corr:
in.sample.fnal_corr.${PREC}:
out.test.fnal_corr.${PREC}:
	touch out.test.fnal_corr.${PREC}

test_fnal:
	for prec in ${PRECLIST};\
	do\
	   ${MAKE} clean;\
	   ${MAKE} -f Make_test "PROJ=fnal_corr" "PREC=$$prec" out.test.diff.fnal_corr.$$prec;\
	done

test_fnal_clean:
	for prec in ${PRECLIST};\
	do\
	     /bin/rm out.test.fnal_corr.$$prec.tmp out.sample.fnal_corr.$$prec.tmp;\
	     /bin/rm out.test.diff.fnal_corr.$$prec out.test.fnal_corr.$$prec; \
	done

check: test test_fnal

clean: test_clean test_fnal_clean

