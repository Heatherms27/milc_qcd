# Makefile for upacking tar files of MILC code
#  C. DeTar 7/27/01

# Targets
#   all    gets all
#   <app>  gets only files needed for a specific application
#          where <app> is the name of an application directory

######################################################################
# Rules for unpacking

# We assume that the user has already untarred the primary
# file ${WORK_NAME_ROOT}.tar.gz or ${RELEASE_NAME_ROOT}.tar.gz
# into a clean directory
# NOTE: These targets WILL overwrite any files with the
# same names as the package files.

include Make_contents

all: ${RELEASE_TAR}
	for f in ${RELEASE_TAR} ;\
        do \
	tar -xf $$f ;\
	done

# The following targets are intended to give the user a subset of
# files needed for a selected application, in case the whole release
# is not unpacked.

ALL_APPS = \
  clover_dynamical \
  clover_invert \
  hvy_qpot \
  ks_dynamical \
  pure_gauge \
  wilson_dynamical \
  wilson_invert

${ALL_APPS}: MAKE_basic

clover_dynamical:  	MAKE_generic_wilson MAKE_generic_clover
clover_invert:  	MAKE_generic_wilson MAKE_generic_clover
hvy_qpot: 		
ks_dynamical:  		MAKE_generic_ks 
pure_gauge: 		MAKE_generic_pg
wilson_dynamical:  	MAKE_generic_wilson
wilson_invert:  	MAKE_generic_wilson

# Rules for the generic directories

MAKE_basic:
	tar -xf ${WORK_BASIC_TAR}

MAKE_generic_clover:
	tar -xf ${WORK_CLOVER_TAR} generic_clover

MAKE_generic_ks:
	tar -xf ${WORK_KS_TAR} generic_ks

MAKE_generic_wilson:
	tar -xf ${WORK_WILSON_TAR} generic_wilson


# Rules for specific application directories

generic_pg \
pure_gauge \
hvy_qpot \
: ${WORK_PURE_GAUGE_TAR}
	tar -xf ${WORK_PURE_GAUGE_TAR} $@

generic_clover \
clover_dynamical \
clover_invert \
: ${WORK_CLOVER_TAR}
	tar -xf ${WORK_CLOVER_TAR} $@

generic_ks \
ks_dynamical \
: ${WORK_KS_TAR}
	tar -xf ${WORK_KS_TAR} $@

generic_wilson \
wilson_dynamical \
wilson_invert \
: ${WORK_WILSON_TAR}
	tar -xf ${WORK_WILSON_TAR} $@

