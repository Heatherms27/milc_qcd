#  MIMD version 6
#  Standard application makefile for MPI on the SP
#  Do not use for making libraries
#  Copy this file into the application directory and run make there.
#

MAKEFILE = Make_sp_mpi

#-------------- with PIOFS ----------------------------
#MACHINE_DEP = com_mpi.o io_piofs.o
#LDFLAGS = ${PIOFSLIB}

#-------------- without PIOFS -------------------------
MACHINE_DEP = com_mpi.o io_ansi.o
LDFLAGS =

# Application-architecture-dependent routines
MACH_DEP_KS_CONGRAD = d_congrad5.o
MACH_DEP_KS_DSLASH_FN = dslash_fn.o

# For IBM SP parallel IO File System routines
PIOFSLIB = -bI:/usr/include/piofs/piofs.exp

CC = cc
FC = xlf

# Cornell and Utah SP include path to mpi.h added by mpcc  10/20/97
# We can't use mpcc for compilation because it strips protection from our
# cc options, which require special characters.

IMPI = -I/usr/lpp/ppe.poe/include

CFLAGS0 = -D_LARGE_FILES ${IMPI} -DMPI -I${MYINCLUDEDIR} -DNATIVEDOUBLE -DINLINE ${DEFINES}

CFLAGS = -O3 -Q=500 -qmaxmem=-1 -qarch=pwr3 -qtune=pwr3 ${CFLAGS0}
FFLAGS = -O3

#LD = mpcc
LD = cc
ILIB = -L/usr/lpp/ppe.poe/lib -L/usr/lpp/ppe.poe/lib/ip -binitfini:poe_remote_main -lmpi -lvtd 

include Make_template

