# This is not a standalone Makefile
# It is intended to be included in other Makefiles

# It defines macros for QOP (SciDAC Level 3)
# HAVEQOP          What we are compiling with
# LIBQOP INCQOP    The -L and -I compiler and linker lists
# INCDEPQOP LIBDEPQOP  Lists for make dependencies
# ASQFORCEQOP

# Requires input macros
# WANTQOP                 User requests (true or otherwise)

HAVEQOP = ${WANTQOP}

QOPINCDIR = ${QOP}/include
# In case QOP is packaged
QOPLIBDIR = ${QOP}/lib

ifeq ($(strip ${QCDOC}),true)
# QCDOC temporary paths
  ifeq ($(strip ${PRECISION}),1)
    IQOP = -DSCIDAC -DASQD_SINGLE -I${QOPINCDIR}
#    LQOP = -L${QOPLIBDIR} -lasqd_s
    LQOP = -L/host/cdetar/qop/asqtad-2.6.0-CJ-8-16-05/build  -lasqd_s
  else
    IQOP = -DSCIDAC -I${QOP}/include/
#    LQOP = -L${QOPLIBDIR} -lasqd
    LQOP = -L/host/cdetar/qop/asqtad-2.6.0-CJ-8-16-05/build -lasqd
  endif
#  LIBDEPQOP = ${QOPLIBDIR}
#  INCDEPQOP = ${QOPINCDIR}
else
  IQOP = -I${QOPINCDIR}
  INCDEPQOP = ${QOPINCDIR}
endif

# Non-packaged QOP objects

# MILC implementation 
# General
  GENERICQOP = qop_milc.o 
# Conjugate gradient
  ASQINVERTQOP += d_congrad5_fn_qop_milc.o dslash_fn_qop_milc.o
# Fermion force
  ASQFORCEQOP += fermion_force_asqtad_qop_milc.o ff_opt.o

ifeq ($(strip ${HAVEQOP}),true)
  LIBQOP = ${LQOP}
  INCQOP = ${IQOP}
endif


